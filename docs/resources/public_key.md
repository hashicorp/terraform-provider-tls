---
page_title: "tls_public_key Resource - tls"
subcategory: ""
description: |-
  Get a public key from a PEM-encoded private key.
  Use this managed resource to get the public key from a PEM (RFC 1421) https://datatracker.ietf.org/doc/html/rfc1421 or OpenSSH PEM (RFC 4716) https://datatracker.ietf.org/doc/html/rfc4716 formatted private key, for use in other resources. The private key inputs use write-only attributes (Terraform 1.11+) so the private key is never stored in plan or state.
---

# tls_public_key (Resource)

Get a public key from a PEM-encoded private key.

Use this managed resource to get the public key from a [PEM (RFC 1421)](https://datatracker.ietf.org/doc/html/rfc1421) or [OpenSSH PEM (RFC 4716)](https://datatracker.ietf.org/doc/html/rfc4716) formatted private key, for use in other resources. The private key inputs use write-only attributes (Terraform 1.11+) so the private key is never stored in plan or state.

~> **Note** This resource requires Terraform 1.11 or later, as it uses
[write-only attributes](https://developer.hashicorp.com/terraform/language/resources/syntax#write-only-arguments)
to accept private key inputs without storing them in plan or state.

This is a *logical resource*, so it contributes only to the current Terraform
state and does not create any external managed resources.

## Example Usage

```terraform
# Generate an ephemeral private key (never stored in state)
ephemeral "tls_private_key" "example" {
  algorithm = "ED25519"
}

# Extract the public key using write-only attributes for the private key input
resource "tls_public_key" "example" {
  private_key_pem_wo     = ephemeral.tls_private_key.example.private_key_pem
  private_key_wo_version = 1
}

# Use the public key in a resource that requires a non-ephemeral value
resource "github_repository_deploy_key" "example" {
  title      = "Deploy key"
  repository = "my-repo"
  key        = tls_public_key.example.public_key_openssh
  read_only  = true
}

# Store the private key securely using a write-only attribute
resource "aws_secretsmanager_secret" "example" {
  name = "my-deploy-key"
}

resource "aws_secretsmanager_secret_version" "example" {
  secret_id                = aws_secretsmanager_secret.example.id
  secret_string_wo         = ephemeral.tls_private_key.example.private_key_pem
  secret_string_wo_version = tls_public_key.example.private_key_wo_version
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `private_key_openssh_wo` (String, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The private key (in [OpenSSH PEM (RFC 4716)](https://datatracker.ietf.org/doc/html/rfc4716) format) to extract the public key from. This is _mutually exclusive_ with `private_key_pem_wo`. This attribute is write-only and will not be stored in state. Currently-supported algorithms for keys are: `RSA`, `ECDSA`, `ED25519`.
- `private_key_pem_wo` (String, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The private key (in [PEM (RFC 1421)](https://datatracker.ietf.org/doc/html/rfc1421) format) to extract the public key from. This is _mutually exclusive_ with `private_key_openssh_wo`. This attribute is write-only and will not be stored in state. Currently-supported algorithms for keys are: `RSA`, `ECDSA`, `ED25519`.
- `private_key_wo_version` (Number) A version number that, when changed, triggers replacement of this resource, causing the write-only private key to be re-read from config. This is useful when the private key changes, since write-only attributes are not tracked in state.

### Read-Only

- `algorithm` (String) The name of the algorithm used by the given private key. Possible values are: `RSA`, `ECDSA`, `ED25519`.
- `id` (String) Unique identifier for this resource: hexadecimal representation of the SHA1 checksum of the resource.
- `public_key_fingerprint_md5` (String) The fingerprint of the public key data in OpenSSH MD5 hash format, e.g. `aa:bb:cc:...`. Only available if the selected private key format is compatible, as per the rules for `public_key_openssh` and [ECDSA P224 limitations](../../docs#limitations).
- `public_key_fingerprint_sha256` (String) The fingerprint of the public key data in OpenSSH SHA256 hash format, e.g. `SHA256:...`. Only available if the selected private key format is compatible, as per the rules for `public_key_openssh` and [ECDSA P224 limitations](../../docs#limitations).
- `public_key_openssh` (String) The public key, in [OpenSSH PEM (RFC 4716)](https://datatracker.ietf.org/doc/html/rfc4716) format. This is also known as ['Authorized Keys'](https://www.ssh.com/academy/ssh/authorized_keys/openssh#format-of-the-authorized-keys-file) format. This is not populated for `ECDSA` with curve `P224`, as it is [not supported](../../docs#limitations). **NOTE**: the [underlying](https://pkg.go.dev/encoding/pem#Encode) [libraries](https://pkg.go.dev/golang.org/x/crypto/ssh#MarshalAuthorizedKey) that generate this value append a `\n` at the end of the PEM. In case this disrupts your use case, we recommend using [`trimspace()`](https://www.terraform.io/language/functions/trimspace).
- `public_key_pem` (String) The public key, in [PEM (RFC 1421)](https://datatracker.ietf.org/doc/html/rfc1421) format. **NOTE**: the [underlying](https://pkg.go.dev/encoding/pem#Encode) [libraries](https://pkg.go.dev/golang.org/x/crypto/ssh#MarshalAuthorizedKey) that generate this value append a `\n` at the end of the PEM. In case this disrupts your use case, we recommend using [`trimspace()`](https://www.terraform.io/language/functions/trimspace).
